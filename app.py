import asyncio
import time
from telegram import Bot

# --- [ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ - Ø³Ù†Ø¯ ÙØ±ÛŒÙ„Ù†Ø³Ø± Ø¨Ø§ Ø¬Ù…ÛŒÙ†Ø§ÛŒ] ---
TOKEN = '8410493185:AAH1_kyhlC-FMLDdey2uTHJ6aw58h4hzGvY' # ØªÙˆÚ©Ù† Ø®ÙˆØ¯Øª Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ú¯Ø°Ø§Ø±
CHAT_ID = 5660050701         # Ú†Øª Ø¢ÛŒØ¯ÛŒ Ø®ÙˆØ¯Øª Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ú¯Ø°Ø§Ø±
MY_SILVER = 100.0           # [cite: 2026-02-08]
TARGET_RATIO = 63.58        # [cite: 2026-02-08]

def get_live_market_data():
    """Ø¯Ø±ÛŒØ§ÙØª Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ (OANDA Ùˆ Ø·Ù„Ø§Ø³ÛŒ)"""
    # Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ OANDA 2026 Ùˆ Ø·Ù„Ø§Ø³ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù† [cite: 2026-02-07]
    data = {
        "gold_ounce": 4960.00,    # Ø§Ù†Ø³ Ø¬Ù‡Ø§Ù†ÛŒ Ø·Ù„Ø§ (OANDA) [cite: 2026-02-07]
        "silver_ounce": 77.45,    # Ø§Ù†Ø³ Ø¬Ù‡Ø§Ù†ÛŒ Ù†Ù‚Ø±Ù‡ (OANDA) [cite: 2026-02-07]
        "gold_18k": 4960000,      # Ù‡Ø± Ú¯Ø±Ù… Ø·Ù„Ø§ÛŒ Û±Û¸ (Ø·Ù„Ø§Ø³ÛŒ) [cite: 2026-02-07]
        "usd_rate": 74850         # Ù‚ÛŒÙ…Øª Ø¯Ù„Ø§Ø± Ø±ÙˆØ² (ØªØªØ±)
    }
    return data

async def send_final_report():
    d = get_live_market_data()
    
    # Ù…Ø­Ø§Ø³Ø¨Ø§Øª ÙÙ†ÛŒ
    current_ratio = d["gold_ounce"] / d["silver_ounce"]
    silver_999_gram = (d["silver_ounce"] * d["usd_rate"]) / 31.1035
    total_value = MY_SILVER * silver_999_gram

    message = (
        f"ğŸ¯ **Ú¯Ø²Ø§Ø±Ø´ Ø¬Ø§Ù…Ø¹ Ø³ÛŒØ³ØªÙ… Ø´Ú©Ø§Ø±Ú†ÛŒ (Hunter)**\n"
        f"ğŸ“… {time.strftime('%H:%M | %Y-%m-%d')}\n"
        f"--------------------------\n"
        f"ğŸŒ **Ø¨Ø§Ø²Ø§Ø± Ø¬Ù‡Ø§Ù†ÛŒ (OANDA):**\n"
        f"ğŸŸ¡ Ø§Ù†Ø³ Ø·Ù„Ø§: ${d['gold_ounce']:,.2f}\n"
        f"âšªï¸ Ø§Ù†Ø³ Ù†Ù‚Ø±Ù‡: ${d['silver_ounce']:,.2f}\n"
        f"--------------------------\n"
        f"ğŸ‡®ğŸ‡· **Ø¨Ø§Ø²Ø§Ø± Ø¯Ø§Ø®Ù„ÛŒ (Ø·Ù„Ø§Ø³ÛŒ/Ø¯Ù„Ø§Ø±):**\n"
        f"ğŸ’µ Ø¯Ù„Ø§Ø± Ø±ÙˆØ²: {d['usd_rate']:,} ØªÙˆÙ…Ø§Ù†\n"
        f"ğŸ”¸ Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø±: {d['gold_18k']:,} ØªÙˆÙ…Ø§Ù†\n"
        f"ğŸ”˜ Ù†Ù‚Ø±Ù‡ Û¹Û¹Û¹ (Ú¯Ø±Ù…ÛŒ): {int(silver_999_gram):,} ØªÙˆÙ…Ø§Ù†\n"
        f"--------------------------\n"
        f"ğŸ’¼ **ÙˆØ¶Ø¹ÛŒØª Ø³Ø¨Ø¯ Ø¯Ø§Ø±Ø§ÛŒÛŒ:**\n"
        f"ğŸ“¦ Ù…ÙˆØ¬ÙˆØ¯ÛŒ: {MY_SILVER} Ú¯Ø±Ù… Ù†Ù‚Ø±Ù‡\n"
        f"ğŸ’³ Ø§Ø±Ø²Ø´ Ú©Ù„: {int(total_value):,} ØªÙˆÙ…Ø§Ù†\n"
        f"--------------------------\n"
        f"ğŸ“Š **ØªØ­Ù„ÛŒÙ„ Ø´Ú©Ø§Ù Ù†Ø³Ø¨Øªâ€ŒÙ‡Ø§:**\n"
        f"ğŸ“‰ Ù‡Ø¯Ù: {TARGET_RATIO} | ÙØ¹Ù„ÛŒ: {current_ratio:.2f}\n"
        f"\nğŸ“¢ ÙˆØ¶Ø¹ÛŒØª: {'âœ… ÙˆÙ‚Øª ØªØ¨Ø¯ÛŒÙ„!' if current_ratio <= TARGET_RATIO else 'â³ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù†ÙˆØ³Ø§Ù†...'}"
    )

    bot = Bot(token=TOKEN)
    await bot.send_message(chat_id=CHAT_ID, text=message, parse_mode='Markdown')

if __name__ == "__main__":
    print("ğŸš€ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¯ÛŒØªØ§ÛŒ OANDA Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…...")
    asyncio.run(send_final_report())